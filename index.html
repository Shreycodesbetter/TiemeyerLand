<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiemeyerland - Acropolis, Agora, and Ekklesiasterion</title>
    <style>
      /* General Styles */
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: row;
        height: 100vh;
        background: linear-gradient(to bottom, #87CEEB, #FFD700);
      }

      .map-container {
        flex: 2;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .complex-landmass {
        position: relative;
        width: 70%;
        height: 70%;
        background: linear-gradient(to bottom, #2E8B57, #228B22);
        border-radius: 60% 40% 50% 50% / 40% 60% 50% 50%;
        box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
      }

      .dot {
        position: absolute;
        width: 20px;
        height: 20px;
        background: red;
        border: 2px solid white;
        border-radius: 50%;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        z-index: 3;
      }

      .dot:hover {
        transform: scale(1.3);
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
      }

      .dot#location1 {
        top: 20%;
        left: 30%;
      }

      .dot#location2 {
        top: 50%;
        left: 60%;
      }

      .dot#location3 {
        top: 65%;
        left: 25%;
      }

      .canvas-container {
        flex: 2;
        position: relative;
        display: none;
        align-items: center;
        justify-content: center;
        background: #F5DEB3;
      }

      .canvas-container.visible {
        display: flex;
      }

      .info-container {
        flex: 1;
        background: #f9f9f9;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        box-shadow: -5px 0 10px rgba(0, 0, 0, 0.1);
      }

      .info {
        max-width: 80%;
        font-size: 1em;
        color: #333;
        text-align: justify;
      }

      .info-title {
        font-size: 1.5em;
        font-weight: bold;
        margin-bottom: 15px;
      }

      canvas {
        width: 100%;
        height: 100%;
        display: block;
      }

      .back-button {
        position: absolute;
        top: 10px;
        left: 10px;
        background: #ff6347;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 1em;
        cursor: pointer;
        border-radius: 5px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
        transition: background-color 0.2s;
      }

      .back-button:hover {
        background-color: #ff4500;
      }
    </style>
  </head>
  <body>
    <!-- Map Container -->
    <div class="map-container" id="map-container">
      <div class="complex-landmass">
        <!-- Location Dots -->
        <div class="dot" id="location1" data-title="The Acropolis" data-info="An ancient citadel located on a rocky outcrop above the city and containing the remains of several historically significant buildings."></div>
        <div class="dot" id="location2" data-title="Agora" data-info="The bustling ancient Greek marketplace where merchants sell goods under wooden stalls with cloth canopies."></div>
        <div class="dot" id="location3" data-title="The Ekklesiasterion" data-info="A grand assembly hall used for gatherings and discussions in ancient Greece."></div>
      </div>
    </div>

    <!-- Canvas Container -->
    <div class="canvas-container" id="canvas-container">
      <!-- 3D Model Canvas -->
      <canvas id="render-view" style="display: none;"></canvas>

      <!-- Sketchfab Embed -->
      <div class="sketchfab-embed-wrapper" id="ekklesiasterion-model" style="display: none;">
        <iframe title="METAPONTO - Teatro" frameborder="0" allowfullscreen mozallowfullscreen="true"
          webkitallowfullscreen="true" allow="autoplay; fullscreen; xr-spatial-tracking" 
          src="https://sketchfab.com/models/24fb856149fc41eba9b7cee4928f8f66/embed">
        </iframe>
        <p style="font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;">
          <a href="https://sketchfab.com/3d-models/metaponto-teatro-24fb856149fc41eba9b7cee4928f8f66" 
             target="_blank" rel="nofollow" style="font-weight: bold; color: #1CAAD9;">METAPONTO - Teatro</a> 
          by <a href="https://sketchfab.com/metapontoparcoarcheologico" target="_blank" rel="nofollow" 
            style="font-weight: bold; color: #1CAAD9;">metapontoparcoarcheologico</a> on 
          <a href="https://sketchfab.com" target="_blank" rel="nofollow" 
            style="font-weight: bold; color: #1CAAD9;">Sketchfab</a>
        </p>
      </div>

      <!-- Back Button -->
      <button class="back-button" id="back-button">Back</button>
    </div>

    <!-- Info Container -->
    <div class="info-container">
      <div class="info">
        <div class="info-title" id="info-title">Welcome to Tiemeyerland</div>
        <p id="info-text">
          Tiemeyerland is a beautiful fictional landmass surrounded by cliffs and beaches,
          dotted with vibrant cities and villages. Explore its geography, culture, and history
          by clicking on the locations on the map!
        </p>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const mapContainer = document.getElementById('map-container');
        const canvasContainer = document.getElementById('canvas-container');
        const backButton = document.getElementById('back-button');
        const canvas = document.getElementById('render-view');
        const infoTitle = document.getElementById('info-title');
        const infoText = document.getElementById('info-text');
        const dots = document.querySelectorAll('.dot');
        const ekklesiasterionModel = document.getElementById('ekklesiasterion-model');

        let scene, camera, renderer;

        function initAcropolisView() {
          scene = new THREE.Scene();
          camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
          camera.position.set(30, 20, 50);
          camera.lookAt(0, 10, 0);
          renderer = new THREE.WebGLRenderer({ canvas: canvas });
          renderer.setSize(canvas.clientWidth, canvas.clientHeight);

          const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
          const sunlight = new THREE.DirectionalLight(0xfff5e1, 1);
          sunlight.position.set(10, 20, 10);
          scene.add(ambientLight, sunlight);

          const floorMaterial = new THREE.MeshStandardMaterial({ color: 0xFFFFAA });
          const floor = new THREE.Mesh(new THREE.PlaneGeometry(50, 50), floorMaterial);
          floor.rotation.x = -Math.PI / 2;
          scene.add(floor);

          const towerMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
          const tower = new THREE.Mesh(new THREE.BoxGeometry(10, 20, 10), towerMaterial);
          tower.position.set(0, 10, 0);
          scene.add(tower);

          const wallMaterial = new THREE.MeshStandardMaterial({ color: 0xF4A460 });
          const wallHeight = 6, wallThickness = 1, wallLength = 30;

          const wall1 = new THREE.Mesh(new THREE.BoxGeometry(wallLength, wallHeight, wallThickness), wallMaterial);
          wall1.position.set(0, wallHeight / 2, -15);
          scene.add(wall1);

          const wall2 = wall1.clone();
          wall2.position.set(0, wallHeight / 2, 15);
          scene.add(wall2);

          const wall3 = new THREE.Mesh(new THREE.BoxGeometry(wallThickness, wallHeight, wallLength), wallMaterial);
          wall3.position.set(-15, wallHeight / 2, 0);
          scene.add(wall3);

          const wall4 = wall3.clone();
          wall4.position.set(15, wallHeight / 2, 0);
          scene.add(wall4);

          const crenellationMaterial = new THREE.MeshStandardMaterial({ color: 0xF4A460 });
          const crenellationWidth = 2, crenellationHeight = 2, crenellationDepth = 1;

          for (let i = -12; i <= 12; i += 4) {
            const crenellation = new THREE.Mesh(new THREE.BoxGeometry(crenellationWidth, crenellationHeight, crenellationDepth), crenellationMaterial);
            crenellation.position.set(i, wallHeight + crenellationHeight / 2, -15);
            scene.add(crenellation);

            const crenellationBack = crenellation.clone();
            crenellationBack.position.set(i, wallHeight + crenellationHeight / 2, 15);
            scene.add(crenellationBack);
          }

          for (let i = -12; i <= 12; i += 4) {
            const crenellationLeft = new THREE.Mesh(new THREE.BoxGeometry(crenellationDepth, crenellationHeight, crenellationWidth), crenellationMaterial);
            crenellationLeft.position.set(-15, wallHeight + crenellationHeight / 2, i);
            scene.add(crenellationLeft);

            const crenellationRight = crenellationLeft.clone();
            crenellationRight.position.set(15, wallHeight + crenellationHeight / 2, i);
            scene.add(crenellationRight);
          }

          function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
          }

          animate();
        }

        function initAgoraView() {
          scene = new THREE.Scene();
          camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
          camera.position.set(0, 10, 40);
          camera.lookAt(0, 0, 0);
          renderer = new THREE.WebGLRenderer({ canvas: canvas });
          renderer.setSize(canvas.clientWidth, canvas.clientHeight);

          const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
          const sunlight = new THREE.DirectionalLight(0xfff5e1, 1);
          sunlight.position.set(10, 20, 10);
          scene.add(ambientLight, sunlight);

          const groundMaterial = new THREE.MeshStandardMaterial({ color: 0xD2B48C });
          const ground = new THREE.Mesh(new THREE.PlaneGeometry(80, 40), groundMaterial);
          ground.rotation.x = -Math.PI / 2;
          scene.add(ground);

          const stallMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
          const canopyMaterial = new THREE.MeshStandardMaterial({ color: 0xFFDEAD });

          for (let z = -15; z <= 15; z += 10) {
            const baseLeft = new THREE.Mesh(new THREE.BoxGeometry(6, 1, 3), stallMaterial);
            baseLeft.position.set(-20, 0.5, z);
            scene.add(baseLeft);

            const canopyLeft = new THREE.Mesh(new THREE.BoxGeometry(6, 1, 3), canopyMaterial);
            canopyLeft.position.set(-20, 2.5, z);
            scene.add(canopyLeft);

            const baseRight = new THREE.Mesh(new THREE.BoxGeometry(6, 1, 3), stallMaterial);
            baseRight.position.set(20, 0.5, z);
            scene.add(baseRight);

            const canopyRight = new THREE.Mesh(new THREE.BoxGeometry(6, 1, 3), canopyMaterial);
            canopyRight.position.set(20, 2.5, z);
            scene.add(canopyRight);
          }

          function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
          }

          animate();
        }

        function initEkklesiasterionView() {
          ekklesiasterionModel.style.display = 'block';
        }

        dots.forEach(dot => {
          dot.addEventListener('click', () => {
            infoTitle.textContent = dot.getAttribute('data-title');
            infoText.textContent = dot.getAttribute('data-info');
            mapContainer.classList.add('hidden');
            canvasContainer.classList.add('visible');
            scene = new THREE.Scene();

            if (dot.id === 'location1') {
              initAcropolisView();
            } else if (dot.id === 'location2') {
              initAgoraView();
            } else if (dot.id === 'location3') {
              initEkklesiasterionView();
            }
          });
        });

        backButton.addEventListener('click', () => {
          canvasContainer.classList.remove('visible');
          mapContainer.classList.remove('hidden');
          ekklesiasterionModel.style.display = 'none';
        });
      });
    </script>
  </body>
</html>
